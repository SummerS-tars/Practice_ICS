# Lab 8 : ELF File Analyze, Shared Library and Interpositioning Learning

## ELF File Analyze

### Dependency Relationship and Undefined Symbols Analysis

```bash
❯ export LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH
❯ ldd -r -v demo
```

output

```txt
        linux-vdso.so.1 (0x00007de0960bc000)
        libseries.so => ./libseries.so (0x00007de0960ac000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007de095e00000)
        /lib64/ld-linux-x86-64.so.2 (0x00007de0960be000)

        Version information:
        ./demo:
                libc.so.6 (GLIBC_2.2.5) => /lib/x86_64-linux-gnu/libc.so.6
                libc.so.6 (GLIBC_2.34) => /lib/x86_64-linux-gnu/libc.so.6
        /lib/x86_64-linux-gnu/libc.so.6:
                ld-linux-x86-64.so.2 (GLIBC_2.2.5) => /lib64/ld-linux-x86-64.so.2
                ld-linux-x86-64.so.2 (GLIBC_2.3) => /lib64/ld-linux-x86-64.so.2
                ld-linux-x86-64.so.2 (GLIBC_PRIVATE) => /lib64/ld-linux-x86-64.so.2
```

### Readelf Analyze

dynamic linkage info :
runtime `.so` dependency  
dynamic linker path  
symbol resolution info  
relocation info  

headers :  

ELF header  
Program Headers  

Sections :  

info of all sections in the file(code, data, symbols and so on)  
section header table info  

args:  

```bash
-d
--dynamic
    # Displays the contents of the file's dynamic section, if it has one.

-h
--file-header
    # Displays the information contained in the ELF header at the start of the file.

-l
--program-headers
--segments
    # Displays the information contained in the file's segment headers, if it has any.

-S
--sections
--section-headers
    # Displays the information contained in the file's section headers, if it has any.
```

#### Result and Analysis

```bash
readelf -h -l -S -d demo
readelf -h -l -S -d libseries.so
```

**demo:** [demoAnalysis](demoAnalysis.txt)  

**libseries\.so:** [libseriesAnalysis.txt](libseriesAnalysis.txt)  

### Disassemble

```bash
objdump -d demo > demo.asm
objdump -d libseries.so > libseries.asm
```

[demo.asm](demo.asm)  
[libseries.asm](libseries.asm)  

the record to find GOT entry  
[recordDisasDemoGOT.md](recordDisasDemoGOT.md)  
